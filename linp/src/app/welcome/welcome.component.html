<div class="container">
  <h1>
    Welcome to <strong>LINP</strong>
  </h1>


  <div class="card-deck">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">Dashboard</h4>
        <h6 class="card-subtitle mb-2 text-muted">Status</h6>

        <div *ngIf="user; then isLoggedIn else isNotLoggedIn"></div>

        <ng-template #isNotLoggedIn>
          <button class="btn btn-primary" class="btn btn-primary" (click)="login()">Login by Google</button>
          <button class="btn btn-primary" class="btn btn-secondary" (click)="loginAnonymous()">Login anonymous
          </button>
        </ng-template>

        <ng-template #isLoggedIn>
          <div>
            Logged in with <strong>{{(user)?.displayName}}</strong> - {{(user)?.uid}}
          </div>
          <div>
            <button *ngIf="!firstTimeLoggedInEver"
                    type="button"
                    class="btn btn-primary"
                    routerLink="/startgame">Start Playing
            </button>
            <button type="button" class="btn btn-secondary" (click)="logout()">Logout</button>
          </div>
        </ng-template>

      </div>
    </div>

    <div class="card">
      <div class="card-body">
        <h3 class="card-title">
          Player Profile
        </h3>
        <div class="card-body">
          <div class="form-group row"
               [ngClass]="{'has-success' : successfulSavedPlayername}"
          >
            <label for="playername" class="col-4 col-form-label">Player Name</label>
            <div class="col-8">
              <input
                id="playername"
                type="text"
                class="form-control"
                [ngClass]="{'form-control-success' : successfulSavedPlayername}"
                name="playerName"
                [(ngModel)]="playerName"
                #playerNameInput="ngModel"
                (ngModelChange)="playerName"
                required
                value="user.displayName"
              />
              <div class="form-control-feedback">
                  <span>
                    <fade [isVisible]="successfulSavedPlayername">Succesful saved</fade>
                    &nbsp;
                  </span>
                <span class="form-control-feedback" [hidden]="playerNameInput.valid">
                    Name is required
                  </span>
              </div>
              <div>

              </div>
            </div>

            <button (click)="savePlayerName()"
                    class="btn"
                    id="savePlayerName"
                    [ngClass]="[!successfulSavedPlayername ? 'btn-primary' : 'btn-success']"
                    [disabled]="!playerNameInput.valid"
            >
              Save
            </button>

          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="card-deck  mt-3">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">Game Rules</h4>
        <p class="card-text">
          Linq is a party of game of bluffing and
          collusion for 4-8 players, ages 10 and up.
          In Linq, two players assume the role of spies
          who are attempting to identify one another
          via secret code words. All other players take
          on the role of double agents, whose goal is
          to identify and confuse the spies by
          deciphering their secret code.
        </p>
        <a href="javascript:void(0)" (click)="isExpandInstructions = true"
           *ngIf="!isExpandInstructions"
        >Show more ...</a>

        <p
          *ngIf="isExpandInstructions"
          class="card-text"
        >
          This is more explanation.
        </p>
      </div>
    </div>
  </div>
</div>

<app-gameprogress parent="{{isSecondtip ? 2 : 1}}" child="{{isSecondtip ? 3 : 1}}"></app-gameprogress>
<br>

<div [hidden]="gamePlayers === undefined">

  <span id="savedResponseFlag" class="d-none" *ngIf="savedResponseFlag"></span>
  
  <app-actionguide [waitingGamePlayerNames]="[currentPlayer?.name]" *ngIf="isPlayersTurnForAuthUser === false"></app-actionguide>

  <div class="card">
    <div class="card-body">
      <div class="pt-3" #isTurn *ngIf="isPlayersTurnForAuthUser">
        <div class="row" id="yourTurn">
          <div class="col-8 text-center">
            
              <div class="d-flex justify-content-center text-center">
                <ng-container *ngIf="loggedInGamePlayer?.questionmarkOrWord !== '?'">
                  <div>
                    <svg-icon src="supervisor_account" class="fill-white d-block"></svg-icon>
                    Twin Agent
                  </div>
                  <div class="pl-5">
                    <svg-icon src="vpn_key" class="fill-white d-block"></svg-icon>
                    {{loggedInGamePlayer?.questionmarkOrWord}}
                  </div>
                </ng-container>
                <div [hidden]="loggedInGamePlayer?.questionmarkOrWord !== '?'">
                  <svg-icon src="person_outline" class="fill-white d-block"></svg-icon>
                  Single Agent
                </div>
              </div>
              
          </div>
          <div class="col-4 text-right">
            <img src="assets/whisper_small.jpg">
          </div>
        </div>

        <form novalidate #giveSynonymForm="ngForm">
          <div class="form-group text-left pt-3">
            <label for="synonymTxt">
              <ng-container *ngIf="loggedInGamePlayer?.questionmarkOrWord === '?'">
                <p i18n="@@tiptemplate.hint1">
                  Try to confuse others to come up with a code word, where agents think you are a twin partner.
                </p>
              </ng-container>
              <ng-container *ngIf="loggedInGamePlayer?.questionmarkOrWord !== '?'" i18n="@@tiptemplate.partner.hint">
                <!-- Give your {{isSecondtip ? 'second' : 'first' }} code word for 
                <span class="badge badge-primary">
                    {{loggedInGamePlayer?.questionmarkOrWord}}
                  </span>
                  -->
                
                <br>
                <svg-icon src="thumb_up" class="svg-small fill-success align-bottom"></svg-icon> Twin Agent is able to identify you
                <br>                  
                <svg-icon src="thumb_down" class="svg-small fill-danger align-bottom"></svg-icon> Twin Agent pairing too obvious for others   
                <br>
              </ng-container>
            </label>
            <div>
              <input type="text" class="form-control" [ngClass]="{'is-invalid' : synonymInput?.dirty && synonymInput.errors?.required}"
                     id="synonymTxt" [(ngModel)]="synonym" #synonymInput="ngModel" name="synonym" required
                     placeholder="Code word association to secret word"
                     >
              <div *ngIf="synonymInput?.dirty && synonymInput.errors?.required" i18n="@@tiptemplate.required">
                Provide your code word
              </div>
            </div>
          </div>
          <button id="sendSynonym" class="btn btn-primary btn-block my-2" [disabled]="synonymInput.invalid" (click)="sendSynonym()"
                  i18n="@@tiptemplate.send">
            Save
          </button>
        </form>
      </div>

      <ul class="list-group list-group-flush">
        <li class="list-group-item list-group-item-light mb-1 py-1 text-center">
          <div class="row align-items-center">
            <div class="col-4">
              &nbsp;
            </div>
            <div class="col-4 small" i18n="@@tiptemplate.word1">
              <!-- [ngClass]="{
            'bg-primary progress-bar-striped progress-bar-animated': isSecondtip === false,
            'bg-success': isSecondtip === true
          }" -->
              1st word
            </div>
            <div class="col-4 small" i18n="@@tiptemplate.word2">
              <!-- [ngClass]="{
              'border-left' : isSecondtip,
              'bg-primary progress-bar-striped progress-bar-animated': isSecondtip === true
            }" -->
              <span>2nd word</span>
            </div>
          </div>
        </li>
        <li class="list-group-item mt-1" [ngClass]="{
                'list-group-item-success' : gamePlayer.status === NEXT_STATUS,
                'disabled' : gamePlayer !== currentPlayer
                }" *ngFor="let gamePlayer of gamePlayers; index as $index">
          <div class="row">
            <div class="col-4 px-1">
              {{$index + 1}}. {{gamePlayer.name}}
            </div>
            <div class="col-4 px-1 text-center" [ngClass]="{              
              'progress-bar-striped progress-bar-animated' : !isSecondtip && gamePlayer === currentPlayer || (!isSecondtip && !gamePlayer.firstSynonym),                
              'bg-success': gamePlayer.firstSynonym,              
              'bg-primary': !isSecondtip && gamePlayer === currentPlayer
            }" >
                {{gamePlayer.firstSynonym}}              
            </div>
            <div class="col-4 px-1 text-center" [ngClass]="{
              'border-left' : isSecondtip,  
              'progress-bar-striped progress-bar-animated' : isSecondtip && gamePlayer === currentPlayer || (isSecondtip && !gamePlayer.secondSynonym),                
              'bg-success': isSecondtip && gamePlayer.secondSynonym,
              'bg-primary': isSecondtip && gamePlayer === currentPlayer
              }">
              <!-- 'border border-success': isSecondtip && gamePlayer === currentPlayer && show$, -->
              
              {{gamePlayer.secondSynonym}}
       
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
    <br>

  </div>

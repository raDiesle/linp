<app-gameprogress parent="{{isSecondGuess ? 2 : 1}}" child="{{isSecondGuess ? 4 : 2}}"></app-gameprogress>
<br>

<div [hidden]="gamePlayers === undefined">
  <span id="savedResponseFlag" class="d-none" *ngIf="savedResponseFlag"></span>

  <div class="card" [hidden]="isloggedInPlayerDidGuess === false">
    <div class="card-body ">
      <div class="border border-info">
        <div class="row p-1">
          <div class="col-8">
            <strong>Waiting for</strong>
            <ng-container *ngFor="let gamePlayer of gamePlayers; last as isLast">
              <strong class="strong" *ngIf="gamePlayer.status !== PLAYER_STATUS_AFTER_ACTION">
                {{gamePlayer.name}}
                <span [hidden]="isLast || isOnlyOnePlayerLeftForAction">,</span>
              </strong>
            </ng-container>
          </div>
          <div class="col-4 text-right">
            <img src="assets/agent_small.jpg">
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card pb-3" [hidden]="isloggedInPlayerDidGuess === true">
    <div class="card-header" i18n="@@guesstemplate.who">
      Who might be teaming up and having the same word/role?
    </div>
    <div class="card-body">
      <div class="card-subtitle my-4 text-muted text-center">
        <div class="mt-3" i18n="@@guesstemplate.yourword">This is yours:</div>
        <div class="badge badge-info">{{loggedInGamePlayer?.questionmarkOrWord}}</div>
      </div>
      <h6 class="card-subtitle mb-2 text-muted" i18n="@@guesstemplate.hint1">
        Hint: Make sure prioritizing to guess you and your partner as team.
        <br>
        Consider the sequence of code words given by agents.
      </h6>

      <div class="card-text py-2 h6 text-center">
        <span *ngIf="selectedGamePlayers.length === 0" i18n="@@guesstemplate.selected.first">
          Select first player
        </span>
        <span *ngIf="selectedGamePlayers.length === 1" i18n="@@guesstemplate.selected.second">
          Select the second player
        </span>
        <span *ngIf="selectedGamePlayers.length === 2" i18n="@@guesstemplate.selected.save">
          Want to save choice?
        </span>
      </div>

      <div class="list-group">
        <div class="list-group-item list-group-item-light list-group-item-action">
          <div class="row text-center">
            <div class="col-4 small">
              &nbsp;
            </div>
            <div class="col-4 small" i18n="@@guesstemplate.word1">
              1 Pass
            </div>
            <div class="col-4 small" i18n="@@guesstemplate.word2">
              2 Pass
            </div>
          </div>
        </div>
        <button id="guess_{{gamePlayer.name}}" *ngFor="let gamePlayer of gamePlayers" class="list-group-item" [ngClass]="{
                    'active' : selectedGamePlayers.indexOf(gamePlayer) !== -1,
                    'list-group-item-action' : selectedGamePlayers.length <= 2,
                    'bg-halfheight' : isSecondGuess && selectedGamePlayers.indexOf(gamePlayer) === -1 && (loggedInGamePlayer.firstTeamTip.firstPartner.uid === gamePlayer.uid || loggedInGamePlayer.firstTeamTip.secondPartner.uid === gamePlayer.uid),
                    'disabled' : (this.playerUidToDisableForSelection === gamePlayer.uid || selectedGamePlayers.length >= 2)
                  }" (click)="onTeamPlayerGuessSelected(gamePlayer)">
          <div class="row" placement="top" ngbTooltip="You can't select exact same twin partners than in 1st guess"
               [disableTooltip]="playerUidToDisableForSelection !== gamePlayer.uid || selectedGamePlayers.length > 2">
            <div class="col-4">
              <span>
                {{gamePlayer.name}}
              </span>
            </div>
            <div class="col-4">
              <span class="badge badge-info w-100">{{gamePlayer.firstSynonym}}</span>
            </div>
            <div class="col-4">
              <span class="badge badge-info w-100">{{gamePlayer.secondSynonym}}</span>
            </div>
          </div>
        </button>
      </div>

      <button id="saveGuessBtn" class="card-link btn btn-block btn-success mt-3" [disabled]="selectedGamePlayers.length < 2" (click)="saveTeamTip()"
              i18n="@@guesstemplate.savebutton">
        Save
      </button>
    </div>
  </div>

</div>
